# PineScript v6 VSCode Extension å¼€å‘æŒ‡å—

## âš ï¸ æ¯æ¬¡ä¿®æ”¹ä»£ç åå¿…åš

### ğŸ§¹ ä»£ç æ¸…ç†
1. ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥
2. ç§»é™¤æœªä½¿ç”¨çš„å˜é‡å’Œå‡½æ•°
3. **å‡½æ•°å‚æ•°**: æœªä½¿ç”¨çš„å‚æ•°ä¿æŒåŸåï¼Œä¸è¦æ”¹æˆ `_` å‰ç¼€
4. ç§»é™¤è°ƒè¯•ä»£ç  (`console.log` ç­‰)
5. è¿è¡Œ `npm test` ç¡®ä¿é€šè¿‡

### ğŸ“ æ–‡æ¡£åŒæ­¥
- æ–°å¢åŠŸèƒ½ â†’ æ›´æ–° `README.md` åŠŸèƒ½åˆ—è¡¨
- ä¿®æ”¹é…ç½®é¡¹ â†’ æ›´æ–° `README.md` æ‰©å±•è®¾ç½®
- æ–°å¢å‘½ä»¤ â†’ æ›´æ–° `README.md` å‘½ä»¤ç« èŠ‚
- é‡å¤§åŠŸèƒ½å˜åŒ– â†’ æ›´æ–° `package.json` çš„ `description`
- æ–°å¢è¯­æ³• â†’ æ›´æ–° `samples/valid-syntax-core.pine`
- æ–°å¢é”™è¯¯æ£€æµ‹ â†’ æ›´æ–° `samples/invalid-syntax.pine`

### ğŸ§ª æµ‹è¯•åŒæ­¥
- ä¿®æ”¹è¯æ³•åˆ†æå™¨ â†’ æ›´æ–° `test/lexer.test.js`
- ä¿®æ”¹è§£æå™¨ â†’ æ›´æ–° `test/parser.test.js`
- æ–°å¢æµ‹è¯•è„šæœ¬ â†’ æ·»åŠ åˆ° `package.json` çš„ `scripts` å’Œä¸» `test` å‘½ä»¤

---

## æ ¸å¿ƒè¯­æ³•è§„åˆ™

### ç¼©è¿›è§„åˆ™ï¼ˆé‡è¦ï¼ï¼‰

**ä»£ç å—**: ç¼©è¿›æ˜¯ **4 çš„å€æ•°**ï¼ˆ0, 4, 8, 12...ï¼‰
```pine
if condition
    x = 1        // 4ä¸ªç©ºæ ¼ - ä»£ç å—
```

**è¡Œå»¶ç»­**: ç¼©è¿›**ä¸æ˜¯ 4 çš„å€æ•°**ï¼ˆ1, 2, 3, 5, 6, 7, 9...ï¼‰
```pine
// âœ… æ­£ç¡® - 2ä¸ªç©ºæ ¼
plot(
  close,
  title = "Test"
  )

// âŒ é”™è¯¯ - 4ä¸ªç©ºæ ¼ä¼šè¢«è®¤ä¸ºæ˜¯ä»£ç å—
plot(
    close,
    title = "Test"
    )
```

### èµ‹å€¼æ“ä½œç¬¦

- `=` - åˆå§‹å£°æ˜ã€è§£æ„èµ‹å€¼ï¼ˆ**è§£æ„åªèƒ½ç”¨** `=`ï¼‰
- `:=` - é‡æ–°èµ‹å€¼ï¼ˆ**ä¸èƒ½ç”¨äºè§£æ„**ï¼‰
- `+=`, `-=`, `*=`, `/=`, `%=` - å¤åˆèµ‹å€¼

```pine
// âœ… æ­£ç¡®
a = 10
a := 20
[x, y] = getTuple()

// âŒ é”™è¯¯
a = 10
a = 20              // åº”è¯¥ç”¨ :=
[x, y] := getTuple()  // è§£æ„ä¸èƒ½ç”¨ :=
```

---

## package.json ç»´æŠ¤

### æ–°å¢ VSCode å‘½ä»¤
- [ ] `package.json` â†’ `contributes.commands` å®šä¹‰
- [ ] `src/extension.ts` â†’ æ³¨å†Œå‘½ä»¤
- [ ] `README.md` â†’ å‘½ä»¤ç« èŠ‚è¯´æ˜
- [ ] ä½¿ç”¨ `pine.` å‰ç¼€å’Œ `Pine:` æ ‡é¢˜

### æ–°å¢é…ç½®é¡¹
- [ ] `package.json` â†’ `contributes.configuration.properties` å®šä¹‰
- [ ] `src/extension.ts` â†’ è¯»å–é…ç½®
- [ ] `README.md` â†’ æ‰©å±•è®¾ç½®ç« èŠ‚è¯´æ˜
- [ ] ä½¿ç”¨ `pine.` å‰ç¼€

### æ–°å¢æµ‹è¯•è„šæœ¬
- [ ] `package.json` â†’ `scripts` æ·»åŠ è„šæœ¬
- [ ] å¦‚æœæ˜¯æµ‹è¯•ï¼Œæ·»åŠ åˆ°ä¸» `test` å‘½ä»¤ï¼ˆç”¨ `&&` è¿æ¥ï¼‰
- [ ] ä½¿ç”¨ `test:` æˆ– `build:` å‰ç¼€

---

## å¼€å‘è§„èŒƒé€ŸæŸ¥

### ä¿®æ”¹è§£æå™¨æ—¶
1. æ›´æ–° `test/parser.test.js`
2. æ›´æ–° `samples/valid-syntax-core.pine`ï¼ˆæ–°è¯­æ³•ï¼‰
3. æ›´æ–° `samples/invalid-syntax.pine`ï¼ˆé”™è¯¯æ£€æµ‹ï¼‰
4. æ›´æ–° `src/parser/ast.ts`ï¼ˆAST ç±»å‹ï¼‰
5. æ›´æ–° `src/parser/astValidator.ts`ï¼ˆéªŒè¯è§„åˆ™ï¼‰

### ä¿®æ”¹è¯æ³•åˆ†æå™¨æ—¶
1. æ›´æ–° `test/lexer.test.js`
2. æ›´æ–° `src/lexer/token.ts`ï¼ˆToken ç±»å‹ï¼‰
3. æ›´æ–° `src/parser/parser.ts`ï¼ˆå¤„ç†æ–° tokenï¼‰

### å‘å¸ƒå‰æ£€æŸ¥
- [ ] `npm test` å…¨éƒ¨é€šè¿‡
- [ ] `npm run build:tsc` ç¼–è¯‘æ— é”™è¯¯
- [ ] ç§»é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å¯¼å…¥å’Œè°ƒè¯•ä»£ç 
- [ ] æ›´æ–° `package.json` ç‰ˆæœ¬å·
- [ ] æ›´æ–° `README.md`ï¼ˆå¦‚æœ‰åŠŸèƒ½å˜åŒ–ï¼‰
- [ ] æ‰‹åŠ¨æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½

---

## å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
npm run watch           # ç›‘å¬å¹¶è‡ªåŠ¨ç¼–è¯‘
npm run build:tsc       # TypeScript ç¼–è¯‘
npm run build:es        # esbuild æ‰“åŒ…

# æµ‹è¯•
npm test                # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:lexer      # è¯æ³•åˆ†æå™¨æµ‹è¯•
npm run test:parser     # è§£æå™¨æµ‹è¯•
npm run test:syntax     # è¯­æ³•ç¤ºä¾‹æµ‹è¯•

# æ‰“åŒ…
npm run clean           # æ¸…ç†æ„å»ºäº§ç‰©
npm run package         # æ‰“åŒ… VSIX
```

---

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ lexer/              # è¯æ³•åˆ†æå™¨
â”œâ”€â”€ parser/             # è¯­æ³•åˆ†æå™¨å’ŒéªŒè¯å™¨
â”œâ”€â”€ providers/          # LSP æä¾›è€…
â””â”€â”€ extension.ts        # æ‰©å±•å…¥å£

test/
â”œâ”€â”€ lexer.test.js       # è¯æ³•æµ‹è¯•
â”œâ”€â”€ parser.test.js      # è§£æå™¨æµ‹è¯•
â””â”€â”€ syntax-examples.test.js  # è¯­æ³•ç¤ºä¾‹éªŒè¯

samples/
â”œâ”€â”€ valid-syntax-core.pine   # åˆæ³•è¯­æ³•ç¤ºä¾‹
â””â”€â”€ invalid-syntax.pine      # éæ³•è¯­æ³•ç¤ºä¾‹
```

---

**æœ€åæ›´æ–°**: 2025-10-15
