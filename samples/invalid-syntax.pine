//@version=6
indicator("Invalid PineScript v6 Syntax Examples", overlay=true)

// ============================================================================
// 错误 1: 重复定义变量（使用 = 而不是 :=）
// ============================================================================

a = 10
a = 20  // ❌ 错误：变量 'a' 已经在 line 7 定义过了

// 正确做法：
b = 10
b := 20  // ✅ 使用 := 重新赋值

// ============================================================================
// 错误 2: 解构赋值使用 := 而不是 =
// ============================================================================

getTuple() =>
    [1, 2]

[x, y] := getTuple()  // ❌ 错误：解构赋值不支持 :=，应该用 =

// 正确做法：
[m, n] = getTuple()  // ✅ 解构赋值只能用 =

// ============================================================================
// 错误 3: 解构赋值中的变量已经定义
// ============================================================================

existing = 5
[existing, newVar] = getTuple()  // ❌ 错误：'existing' 已经定义

// 正确做法：使用不同的变量名
[var1, var2] = getTuple()  // ✅

// ============================================================================
// 错误 4: 重复定义函数
// ============================================================================

myFunc() => 1
myFunc() => 2  // ❌ 错误：函数 'myFunc' 已经定义

// ============================================================================
// 错误 5: 变量和函数同名
// ============================================================================

sameName = 10
sameName() => 20  // ❌ 错误：'sameName' 已经被定义为变量

// ============================================================================
// 错误 6: for 循环使用 in 关键字但语法错误
// ============================================================================

// 传统 for 循环应该用 = 和 to
for i in 0 to 10  // ❌ 错误：传统 for 循环应该是 for i = 0 to 10
    x = i

// 正确做法：
for j = 0 to 10  // ✅
    y = j

// 或者使用 for-in 循环遍历数组
arr = [1, 2, 3]
for item in arr  // ✅
    z = item

// ============================================================================
// 错误 7: 多行函数调用使用 4 的倍数缩进（会被认为是新代码块）
// ============================================================================

// 4 个空格缩进 - 错误！
plot(
    close,
    title = "Test"
    )  // ❌ 解析错误：4个空格会被认为是新的代码块，不是行延续

// 8 个空格缩进 - 错误！
plot(
        close,
        title = "Test"
        )  // ❌ 解析错误：8个空格也是4的倍数

// 正确做法：使用非4的倍数缩进（1, 2, 3, 5, 6, 7, 9...）
plot(
  close,
  title = "Test"
  )  // ✅ 2个空格

plot(
   close,
   title = "Test"
   )  // ✅ 3个空格

// ============================================================================
// 错误 8: 混合使用 4 倍数和非 4 倍数缩进
// ============================================================================

plot(
  close,          // 2个空格（非4倍数）- OK
    title = "Test"  // 4个空格（4的倍数）- 错误！
  )  // ❌ 解析错误：中间的 4 个空格被认为是新代码块

// 正确做法：保持所有缩进都不是4的倍数
plot(
  close,
  title = "Test"
  )  // ✅ 都是2个空格

// ============================================================================
// 错误 9: 0 个空格缩进（也是4的倍数）
// ============================================================================

plot(
close,        // 0个空格 - 错误！
title = "Test"
)  // ❌ 解析错误：0个空格也是4的倍数

// 正确做法：至少缩进1个空格
plot(
 close,
 title = "Test"
 )  // ✅ 1个空格

// ============================================================================
// 错误 10: 在不支持的地方使用复合赋值
// ============================================================================

// 初始声明不能用复合赋值
counter += 1  // ❌ 错误：'counter' 未定义，不能直接用 +=

// 正确做法：先声明再复合赋值
var c = 0
c += 1  // ✅

// ============================================================================
// 错误总结
// ============================================================================

/*
常见语法错误：

1. 重复定义变量 - 使用 = 而不是 := 重新赋值
2. 解构赋值使用 := - 解构赋值只能用 =
3. 解构赋值中使用已定义的变量
4. 重复定义函数
5. 变量和函数同名
6. for 循环语法混淆（= vs in）
7. 多行调用使用 4 的倍数缩进（0, 4, 8, 12...）
8. 混合使用不同规则的缩进
9. 未定义变量就使用复合赋值

记住：
- 重新赋值用 :=，初次声明用 =
- 解构赋值只能用 =
- 多行延续必须使用非 4 倍数缩进（1, 2, 3, 5, 6, 7...）
- 代码块使用 4 的倍数缩进（4, 8, 12...）
*/
